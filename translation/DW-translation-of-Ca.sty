%\usepackage{xelatex-generic-biblatex-indexing}

\usepackage{xelatex-generic-biblatex-indexing}

\addbibresource{biblio4-utf8.bib}

% \begin stuff moved from xelatex-generic-biblatex-indexing.sty

\usepackage{enumitem,
    hyperref,
 %   sober-dw,
    graphicx,
    amsmath, %for the \text{} command
}

% XeLaTeX stuff:
% layout and crop marks
%\usepackage[papersize={6in,9in},bindingoffset=.4in,]{geometry}
%\usepackage[cam,a4,center,frame]{crop}

% redefine enumitem defaults:
\setlist{leftmargin=\parindent, 
    %itemindent=0pt,
    %listparindent=\parindent,
    style=nextline, 
    noitemsep}

% tweaks for spacing, changed from xetex-generic-biblatex.sty
\emergencystretch=.05\textwidth
\widowpenalty 9999
\clubpenalty 9999

% \end stuff moved from xelatex-generic-biblatex-indexing.sty

% indexing - now in xelatex-generic-biblatex-indexing.sty
%\usepackage[xindy]{imakeidx}
%
%\makeindex[name=lexical,
%title=Lexical Index,
%program=texindy,
%options = --input-markup xelatex -M de-accent
%]
%
%\makeindex[name=manuscripts,
%title=Manuscript Index,
%program=texindy,
%options = --input-markup xelatex -M de-accent
%]

%\newindex{lex}{ldx}{lnd}{Lexical Index}
%\makeatletter
%\renewcommand\@idxitem{\par\hangindent 15\p@ }% from sanmed.sty
%%\newcommand\skt[2]{#1%\-otnote{#1: Skt. \emph{#2}}%
%%% #1 = English 
%%% #2 = Sanskrit
%%% next lines experimental
%%  \index[skt]{#1!#2@\emph{#2}}%
%%  \index[skt]{#2@\emph{#2}!#1}}
%\makeatother


% Index of manuscripts
%\newindex{mex}{mdx}{mnd}{Index of Manuscripts}
%\newcommand{\MS}[1]{MS #1\index[manuscripts]{#1}}
%\newcommand{\MSsilent}[1]{\index[manuscripts]{#1}}


%\usepackage 
%{CCA-license}
%{CCASA-license}
%\emergencystretch .75\textwidth


%\def\saneng#1#2{#2 (\sansk{#1})}
%\def\engsan#1#2{#1 (\sansk{#2})}

%\newcommand{\saneng}[2]
%% #1 = Sanskrit
%% #2 = English
%{#2 (\sansk{#1})%
%%%{\def\tuck{\kern -.175em }%
%%%  \def\loweramount{.6ex }%
%%%  \leavevmode 
%%%  \lower\loweramount
%%%  \hbox{\tiny $\llcorner$}\tuck #2 (\sansk{#1})%
%%%  \raise\loweramount 
%%%  \hbox{\tuck \tiny $\urcorner$}%
%% and now make the index entries:
%%  \index[lex]{\sansk{#1}!#2@#2}%
%%  \index[lex]{#2@#2!\sansk{#1}}}%
%  \index[lexical]{#2!#1@\emph{#1}}%
%  \index[lexical]{#1@\emph{#1}!#2}}
%
%\providecommand{\ssaneng}[2]% silent index entry
%% #1 = Sanskrit
%% #2 = English
%{%#2 (\sansk{#1})%
%    %%{\def\tuck{\kern -.175em }%
%    %%  \def\loweramount{.6ex }%
%    %%  \leavevmode 
%    %%  \lower\loweramount
%    %%  \hbox{\tiny $\llcorner$}\tuck #2 (\sansk{#1})%
%    %%  \raise\loweramount 
%    %%  \hbox{\tuck \tiny $\urcorner$}%
%    % and now make the index entries:
%    %  \index[lex]{\sansk{#1}!#2@#2}%
%    %  \index[lex]{#2@#2!\sansk{#1}}}%
%    \index[lexical]{#2!#1@\emph{#1}}%
%    \index[lexical]{#1@\emph{#1}!#2}}

\usepackage{xcolor}

% multiple footnote layers:
\usepackage[ruled]{bigfoot}

\DeclareNewFootnote{A} %[fnsymbol]
\DeclareNewFootnote{V} [alph]

%\usepackage{perpage} % see manyfoot manual, para 5
%\MakeSortedPerPage{footnoteA}
\MakeSortedPerPage{footnoteV}

\renewcommand{\footnote}[1]{\footnoteA{#1}}
\newcommand{\varfoot}[1]{\footnoteV{#1}}

% Make a note where the critical edition is different from the vulgates.
\newcommand{\variant}[4]{\textcolor{teal}{#2}\varfoot{The critical text reads 
\emph{#1}.  
\cite{cara-bhat} and \cite{cara-trikamji3} read \emph{#3}, ``#4.''}}
% #1 CE Skt reading
% #2 translation, in text
% #3 C1 & Bo8 Skt
% #4 C1 & Bo8 tr.

% just Jivananda Vidyasagara Bhattacarya 1877
\newcommand{\variantC}[4]{\textcolor{teal}{#2}\varfoot{The critical 
text reads 
        \emph{#1}.  
        \cite{cara-bhat} reads \emph{#3}, ``#4.''}}
% #1 CE Skt reading
% #2 translation, in text
% #3 C1 Skt
% #4 C1 

% just Trikamji 1941
\newcommand{\variantB}[4]{\textcolor{teal}{#2}\varfoot{The critical 
text reads 
\emph{#1}.  
\cite{cara-trikamji3} reads \emph{#3}, ``#4.''}}
% #1 CE Skt reading
% #2 translation, in text
% #3 Bo8 Skt
% #4 Bo8 tr.

\newcommand{\variantFree}[3]{\textcolor{teal}{#2}\varfoot{The critical 
        text reads 
        \emph{#1}.  
       #3}}
% #1 CE Skt reading
% #2 translation, in text
% #3 free text

\hangfootnotes


%\newcommand{\paranumber}[1]{\par\smallskip [#1]~\ignorespaces}
%\newcommand{\paranumber}[1]{\llap{$^{\text{#1}}$\quad}}
\newcommand{\paranumber}[1]{{\par\smallskip\leavevmode\footnotesize\llap{#1\quad}}\ignorespaces}

